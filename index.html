<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منصة التابعين الذكية | الصرح القرآني العالمي</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@300;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        :root {
            --primary: #0f172a;
            --gold: #c5a059;
            --ai-glow: #6366f1;
            --glass: rgba(255, 255, 255, 0.95);
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: #f8fafc;
            color: var(--primary);
            overflow-x: hidden;
        }

        .quran-font { font-family: 'Amiri', serif; }

        /* تأثيرات الانتقال "انزلاق الورق" */
        .page-node {
            display: none;
            opacity: 0;
            transform: translateX(50px) scale(0.98);
            transition: all 0.8s cubic-bezier(0.23, 1, 0.32, 1);
        }
        .page-node.active {
            display: block;
            opacity: 1;
            transform: translateX(0) scale(1);
        }

        /* كرت الذكاء الاصطناعي المشع */
        .ai-card {
            background: linear-gradient(145deg, #ffffff, #f1f5f9);
            border: 2px solid transparent;
            position: relative;
            box-shadow: 0 20px 50px rgba(99, 102, 241, 0.1);
            transition: 0.5s;
        }
        .ai-card:hover {
            border-color: var(--ai-glow);
            box-shadow: 0 20px 50px rgba(99, 102, 241, 0.2);
        }

        /* فقاعات الدردشة */
        .chat-bubble {
            max-width: 80%;
            padding: 15px 20px;
            border-radius: 25px;
            margin-bottom: 15px;
            font-weight: 500;
            font-size: 0.9rem;
            line-height: 1.6;
        }
        .ai-msg { background: var(--ai-glow); color: white; border-bottom-right-radius: 5px; align-self: flex-start; }
        .user-msg { background: #e2e8f0; color: var(--primary); border-bottom-left-radius: 5px; align-self: flex-end; }

        /* الأزرار الملكية */
        .btn-premium {
            background: linear-gradient(135deg, var(--primary), #1e293b);
            color: white;
            padding: 16px 32px;
            border-radius: 20px;
            font-weight: 900;
            transition: 0.4s;
            box-shadow: 0 10px 25px rgba(15, 23, 42, 0.2);
        }
        .btn-premium:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(15, 23, 42, 0.3);
        }

        /* زخارف إسلامية خلفية */
        .bg-pattern {
            position: fixed;
            top: 0; right: 0;
            z-index: -1;
            opacity: 0.03;
            pointer-events: none;
        }
    </style>
</head>
<body>

    <img src="https://www.transparenttextures.com/patterns/islamic-exercise.png" class="bg-pattern w-full h-full">

    <nav class="sticky top-0 z-[1000] bg-white/80 backdrop-blur-xl border-b border-slate-100 px-6 py-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-4 cursor-pointer" onclick="navigateTo('home')">
                <div class="w-14 h-14 bg-primary rounded-2xl flex items-center justify-center shadow-lg border-b-4 border-gold">
                    <i class="fas fa-microchip text-gold text-2xl"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-black quran-font italic">منصة التابعين <span class="text-gold">الذكية</span></h1>
                    <p class="text-[9px] text-slate-400 font-bold uppercase tracking-[0.3em]">The Intelligent Quranic Portal</p>
                </div>
            </div>

            <div class="hidden lg:flex items-center gap-6 font-black text-xs uppercase tracking-wider">
                <button onclick="navigateTo('home')" class="hover:text-gold transition">الرئيسية</button>
                <button onclick="navigateTo('ai')" class="bg-indigo-50 text-indigo-600 px-4 py-2 rounded-lg flex items-center gap-2">
                    <i class="fas fa-robot animate-bounce"></i> مساعد الحفظ
                </button>
                <button onclick="navigateTo('mosques')" class="hover:text-gold transition">المساجد</button>
                <button onclick="navigateTo('donate')" class="btn-premium !py-3 !px-6 text-[10px]">ادعم النور</button>
            </div>
            
            <button id="backBtn" onclick="navigateTo('home')" class="hidden bg-slate-100 px-4 py-2 rounded-xl text-xs font-bold">
                <i class="fas fa-chevron-right ml-2"></i> العودة
            </button>
        </div>
    </nav>

    <main id="homePage" class="page-node active py-20 px-6 max-w-7xl mx-auto text-center">
        <div class="relative inline-block mb-8">
            <span class="absolute -top-4 -right-4 bg-gold text-white text-[10px] px-3 py-1 rounded-full font-black animate-pulse">جديد 2026</span>
            <h2 class="text-6xl md:text-8xl font-black text-primary leading-tight">جيلٌ قرآنيٌّ <br><span class="text-gold quran-font italic">بأدواتٍ ذكية</span></h2>
        </div>
        <p class="text-xl text-slate-500 max-w-3xl mx-auto mb-16 leading-[2] italic">
            مركز التابعين بالنصيرات، بجوار مدرسة العروبة، يدمج الأصالة بالذكاء الاصطناعي لتمكين الطلاب من الحفظ المتقن والمراجعة التفاعلية تحت إشراف الأستاذ إسماعيل نوفل.
        </p>

        <div class="grid md:grid-cols-3 gap-8 mb-20">
            <div onclick="navigateTo('ai')" class="ai-card p-10 rounded-[40px] cursor-pointer">
                <div class="w-20 h-20 bg-indigo-100 text-indigo-600 rounded-3xl mx-auto flex items-center justify-center text-4xl mb-6">
                    <i class="fas fa-brain"></i>
                </div>
                <h3 class="text-xl font-black mb-4">المعلم الذكي</h3>
                <p class="text-sm text-slate-400 font-medium italic">دردشة تفاعلية لمساعدتك في وضع خطة الحفظ ومراجعة المتشابهات.</p>
            </div>
            <div onclick="navigateTo('mosques')" class="ai-card p-10 rounded-[40px] cursor-pointer">
                <div class="w-20 h-20 bg-gold/10 text-gold rounded-3xl mx-auto flex items-center justify-center text-4xl mb-6">
                    <i class="fas fa-mosque"></i>
                </div>
                <h3 class="text-xl font-black mb-4">إدارة الحلقات</h3>
                <p class="text-sm text-slate-400 font-medium italic">توزيع المساجد الأربعة (التابعين، معاذ، ذو النورين) وكشوفات الطلاب.</p>
            </div>
            <div onclick="navigateTo('donate')" class="ai-card p-10 rounded-[40px] cursor-pointer">
                <div class="w-20 h-20 bg-red-50 text-red-500 rounded-3xl mx-auto flex items-center justify-center text-4xl mb-6">
                    <i class="fas fa-hand-holding-heart"></i>
                </div>
                <h3 class="text-xl font-black mb-4">سهم الوفاء</h3>
                <p class="text-sm text-slate-400 font-medium italic">أهدِ ثواب تبرعك لفقيد عزيز بنظام "صدقة جارية" المتطور.</p>
            </div>
        </div>
    </main>

    <section id="aiPage" class="page-node py-12 px-6 max-w-4xl mx-auto">
        <div class="bg-white rounded-[50px] shadow-2xl overflow-hidden flex flex-col h-[700px] border border-slate-100">
            <div class="bg-indigo-600 p-8 text-white flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <div class="relative">
                        <div class="w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center text-2xl">
                            <i class="fas fa-robot"></i>
                        </div>
                        <span class="absolute bottom-0 right-0 w-4 h-4 bg-green-400 border-4 border-indigo-600 rounded-full"></span>
                    </div>
                    <div>
                        <h3 class="text-xl font-black">مساعد التابعين الذكي</h3>
                        <p class="text-xs opacity-70 font-bold uppercase tracking-widest">متصل الآن لمساعدتك</p>
                    </div>
                </div>
                <button onclick="resetChat()" class="text-xs font-black bg-white/10 px-4 py-2 rounded-lg">إعادة البدء</button>
            </div>

            <div id="chatBox" class="flex-1 p-8 overflow-y-auto flex flex-col space-y-4 bg-slate-50/50">
                <div class="chat-bubble ai-msg">
                    أهلاً بك يا شبل التابعين! أنا مساعدك الذكي. 
                    كيف يمكنني خدمتك اليوم؟ <br>
                    1. المساعدة في وضع خطة حفظ جديدة.<br>
                    2. مراجعة متشابهات سورة البقرة.<br>
                    3. سؤال ديني سريع.
                </div>
            </div>

            <div class="p-6 bg-white border-t flex gap-4">
                <input type="text" id="userInput" placeholder="اكتب سؤالك هنا (مثلاً: كيف أحفظ سورة الكهف بسهولة؟)" class="flex-1 p-5 bg-slate-100 rounded-2xl font-bold outline-none focus:ring-2 ring-indigo-500 transition">
                <button onclick="askAI()" class="w-16 h-16 bg-indigo-600 text-white rounded-2xl shadow-lg shadow-indigo-200 flex items-center justify-center text-xl">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </section>

    <section id="mosquesPage" class="page-node py-16 px-6 max-w-6xl mx-auto">
        <h2 class="text-4xl font-black text-center mb-12 italic">كشوفات المساجد النشطة</h2>
        <div class="grid md:grid-cols-2 gap-8" id="mosquesGrid">
            </div>
    </section>

    <section id="donatePage" class="page-node py-16 px-6 max-w-4xl mx-auto">
        <div class="bg-white rounded-[50px] p-12 shadow-2xl border-t-8 border-gold">
            <h2 class="text-4xl font-black text-center mb-8 italic">بوابة الوفاء والصدقة</h2>
            <div class="bg-blue-50 p-8 rounded-[30px] mb-10">
                <h4 class="font-black text-royal-blue mb-4">أهدِ ثواب تبرعك لفقيد</h4>
                <input type="text" id="deceasedName" placeholder="اسم الفقيد (سيظهر في رسالة الشكر)" class="w-full p-5 rounded-2xl border-2 border-dashed border-gold text-center font-black mb-6 outline-none">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <button onclick="processDonation(5)" class="p-6 bg-white rounded-2xl font-black text-xl hover:bg-gold hover:text-white transition shadow-sm">$5</button>
                    <button onclick="processDonation(20)" class="p-6 bg-white rounded-2xl font-black text-xl hover:bg-gold hover:text-white transition shadow-sm">$20</button>
                    <button onclick="processDonation(50)" class="p-6 bg-white rounded-2xl font-black text-xl hover:bg-gold hover:text-white transition shadow-sm">$50</button>
                    <button onclick="processDonation(100)" class="p-6 bg-white rounded-2xl font-black text-xl hover:bg-gold hover:text-white transition shadow-sm">$100</button>
                </div>
            </div>
            <p class="text-center text-slate-400 italic font-medium">كل تبرع بـ 5 دولار يساهم في بناء جيل يحفظ القرآن.</p>
        </div>
    </section>

    <div id="successModal" class="fixed inset-0 z-[2000] bg-primary/95 hidden flex items-center justify-center p-6 text-center">
        <div class="bg-white p-12 rounded-[50px] max-w-md shadow-2xl">
            <div class="w-24 h-24 bg-green-500 text-white rounded-full mx-auto flex items-center justify-center text-5xl mb-8 shadow-xl">
                <i class="fas fa-check"></i>
            </div>
            <h2 class="text-3xl font-black mb-4 italic">تقبل الله منكم</h2>
            <p id="successMessage" class="text-slate-600 leading-relaxed mb-8 font-bold"></p>
            <button onclick="document.getElementById('successModal').classList.add('hidden')" class="btn-premium px-12 py-4">عودة للرئيسية</button>
        </div>
    </div>

    <footer class="bg-primary text-white py-20 px-6 mt-20 border-t-8 border-gold">
        <div class="max-w-7xl mx-auto grid md:grid-cols-4 gap-12">
            <div class="col-span-2">
                <h3 class="text-3xl font-black quran-font text-gold mb-6 italic">صرح التابعين القرآني</h3>
                <p class="text-slate-400 leading-relaxed italic max-w-md">أكبر منظومة قرآنية تقنية في النصيرات، تهدف لتخريج جيل الحفاظ المتقنين بأحدث الوسائل التعليمية والذكاء الاصطناعي.</p>
            </div>
            <div>
                <h4 class="font-black mb-6 uppercase tracking-widest text-gold text-xs">إدارة الصرح</h4>
                <p class="font-bold mb-2">الأستاذ إسماعيل نوفل</p>
                <p class="text-xs text-slate-500 italic">المدير التنفيذي للمراكز</p>
                <p class="text-xs text-slate-500 italic mt-4">واتساب: +972 56-784-2183</p>
            </div>
            <div>
                <h4 class="font-black mb-6 uppercase tracking-widest text-gold text-xs">روابط سريعة</h4>
                <ul class="space-y-4 text-sm font-bold opacity-80">
                    <li class="cursor-pointer hover:text-gold" onclick="navigateTo('ai')">المساعد الذكي</li>
                    <li class="cursor-pointer hover:text-gold" onclick="navigateTo('mosques')">كشوفات المساجد</li>
                    <li class="cursor-pointer hover:text-gold" onclick="navigateTo('donate')">تبرع الآن</li>
                </ul>
            </div>
        </div>
        <div class="text-center mt-20 pt-8 border-t border-white/5 text-[10px] uppercase tracking-[0.8em] font-black opacity-30">
            All Rights Reserved © Al-Tabieen Center 2026
        </div>
    </footer>

    <script>
        // 1. نظام التنقل "انزلاق الورق"
        function navigateTo(id) {
            document.querySelectorAll('.page-node').forEach(p => p.classList.remove('active'));
            const target = document.getElementById(id + 'Page');
            if(target) target.classList.add('active');
            
            const backBtn = document.getElementById('backBtn');
            id === 'home' ? backBtn.classList.add('hidden') : backBtn.classList.remove('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // 2. محرك الذكاء الاصطناعي التفاعلي (AI Tutor Logic)
        const aiDatabase = {
            "خطة": "أهلاً بك! لحفظ سورة البقرة في شهر، أنصحك بحفظ صفحتين بعد صلاة الفجر وصفحة بعد صلاة العشاء. هل تريدني أن أتابع معك يومياً؟",
            "كيف": "الحفظ المتقن يبدأ بالقراءة الصحيحة. استمع للشيخ الحصري، ثم كرر الآية 10 مرات، ثم اربطها بما قبلها. هل تريد اختباراً في جزء عم؟",
            "سؤال": "تفضل اسأل ما شئت في علوم القرآن أو الفقه الميسر، أنا هنا لخدمتك.",
            "البقرة": "سورة البقرة هي سنام القرآن. هل تبحث عن متشابهات (تلك الرسل) أم (وإذ قلنا للملائكة)؟",
            "اسماعيل": "الأستاذ إسماعيل نوفل هو مديرنا الفاضل، وهو يتابع تقدم جميع الطلاب بنفسه. هل أنت من طلاب حلقة التميز؟",
            "اختبار": "ما هي السورة التي بدأت بـ 'المر'؟ (الرعد). أحسنت! أنت حافظ متميز."
        };

        function askAI() {
            const input = document.getElementById('userInput');
            const chatBox = document.getElementById('chatBox');
            const val = input.value.trim();

            if(!val) return;

            // إضافة رسالة المستخدم
            chatBox.innerHTML += `<div class="chat-bubble user-msg">${val}</div>`;
            input.value = "";

            // ذكاء اصطناعي بسيط (يمكن ربطه بـ API لاحقاً)
            setTimeout(() => {
                let response = "عذراً يا بطل، لم أفهم سؤالك بدقة. جرب كتابة كلمات مثل (خطة، كيف أحفظ، سؤال، اختبار).";
                
                for(let key in aiDatabase) {
                    if(val.includes(key)) {
                        response = aiDatabase[key];
                        break;
                    }
                }

                chatBox.innerHTML += `<div class="chat-bubble ai-msg">${response}</div>`;
                chatBox.scrollTop = chatBox.scrollHeight;
            }, 800);
        }

        // 3. نظام المساجد التفاعلي
        const mosques = [
            { id: 'tabieen', name: 'مسجد التابعين', teacher: 'الشيخ محمد العصار', students: 250, tops: ['أحمد', 'ياسين', 'سعيد'] },
            { id: 'moath', name: 'مسجد معاذ بن جبل', teacher: 'الشيخ يوسف خالد', students: 100, tops: ['علي', 'عمر', 'سند'] },
            { id: 'noor', name: 'مسجد ذو النورين', teacher: 'الشيخ إبراهيم نوفل', students: 80, tops: ['حمزة', 'بكر', 'نور'] },
            { id: 'girls', name: 'فرع الطالبات', teacher: 'المحفظة أم أنس', students: 150, tops: ['سارة', 'فاطمة', 'مريم'] }
        ];

        function renderMosques() {
            const grid = document.getElementById('mosquesGrid');
            mosques.forEach(m => {
                grid.innerHTML += `
                    <div class="ai-card p-8 rounded-[30px]">
                        <div class="flex justify-between items-start mb-6">
                            <h3 class="text-2xl font-black italic text-primary">${m.name}</h3>
                            <span class="bg-indigo-100 text-indigo-600 px-3 py-1 rounded-full text-[10px] font-black italic">${m.students} طالب</span>
                        </div>
                        <p class="text-xs text-slate-400 font-bold mb-6 italic">المحفظ المسؤول: ${m.teacher}</p>
                        <div class="bg-slate-50 p-6 rounded-2xl mb-6">
                            <h4 class="text-[10px] font-black text-gold uppercase tracking-widest mb-4">أوائل الحلقة (التميز) ⭐</h4>
                            <div class="flex gap-4">
                                ${m.tops.map(t => `<span class="bg-white border px-3 py-1 rounded-lg text-xs font-black italic shadow-sm">${t}</span>`).join('')}
                            </div>
                        </div>
                        <button onclick="navigateTo('ai')" class="w-full bg-primary text-white py-3 rounded-xl font-black text-xs hover:bg-gold transition">تواصل مع المحفظ</button>
                    </div>
                `;
            });
        }

        // 4. نظام التبرع والصدقة الجارية
        function processDonation(amt) {
            const deceased = document.getElementById('deceasedName').value;
            const msg = document.getElementById('successMessage');
            
            if(deceased) {
                msg.innerHTML = `تم استلام تبرعك بقيمة <b>$${amt}</b>. هذا السهم مسجل الآن كصدقة جارية في ميزان حسنات الفقيد <b>${deceased}</b>. نسأل الله أن يجعل قبره روضة من رياض الجنة.`;
            } else {
                msg.innerHTML = `تم استلام مساهمتك الكريمة بقيمة <b>$${amt}</b>. تبرعك يساهم في كفالة حلقات التابعين وتطوير المنظومة الذكية.`;
            }
            
            document.getElementById('successModal').classList.remove('hidden');
        }

        // تشغيل الوظائف عند التحميل
        window.onload = () => {
            renderMosques();
            gsap.from(".ai-card", { duration: 1.2, y: 100, opacity: 0, stagger: 0.2, ease: "power4.out" });
        };

        function resetChat() {
            document.getElementById('chatBox').innerHTML = `<div class="chat-bubble ai-msg">تمت إعادة تهيئة الذاكرة.. كيف أساعدك الآن؟</div>`;
        }
    </script>
</body>
</html>
