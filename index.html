<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø§Ù„ØªØ§Ø¨Ø¹ÙŠÙ† | Ù…Ø±ÙƒØ² Ø§Ù„ØªØ§Ø¨Ø¹ÙŠÙ† Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        :root {
            --primary-gold: #D4AF37;
            --royal-blue: #002347;
            --deep-dark: #000c18;
            --accent-gold: #FFD700;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-gold) var(--deep-dark);
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--deep-dark);
            color: #fff;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(0, 35, 71, 0.3) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(212, 175, 55, 0.05) 0%, transparent 40%);
        }

        .font-amiri { font-family: 'Amiri', serif; }

        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠ Ø§Ù„ÙØ®Ù… */
        .imperial-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .imperial-card:hover {
            border-color: var(--primary-gold);
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(212, 175, 55, 0.1);
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ */
        nav {
            background: rgba(0, 12, 24, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
            position: fixed;
            width: 100%;
            z-index: 1000;
            top: 0;
        }

        .nav-link {
            position: relative;
            color: #fff;
            font-weight: 700;
            transition: 0.3s;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-gold);
            transition: 0.3s;
        }

        .nav-link:hover::after { width: 100%; }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø°Ù‡Ø¨ÙŠØ© */
        .btn-gold {
            background: linear-gradient(45deg, #D4AF37, #F1D592);
            color: var(--royal-blue);
            font-weight: 900;
            padding: 12px 30px;
            border-radius: 12px;
            text-transform: uppercase;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
            transition: 0.3s;
        }

        .btn-gold:hover {
            transform: scale(1.05);
            filter: brightness(1.1);
        }

        /* Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ (Journey) */
        .journey-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .part-dot {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(212, 175, 55, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            transition: 0.4s;
        }

        .part-dot.completed {
            background: var(--primary-gold);
            color: var(--royal-blue);
            box-shadow: 0 0 15px var(--primary-gold);
        }

        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
        .section-panel { display: none; padding-top: 100px; animation: fadeIn 0.8s ease; }
        .section-panel.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Ø§Ù„ØªØ°ÙŠÙŠÙ„ */
        footer {
            border-top: 1px solid rgba(212, 175, 55, 0.2);
            background: rgba(0, 8, 16, 0.9);
            padding: 40px 0;
            text-align: center;
        }

        /* Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª */
        .custom-input {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(212,175,55,0.2);
            border-radius: 12px;
            padding: 15px;
            color: white;
            outline: none;
            width: 100%;
        }
    </style>
</head>
<body>

    <nav class="p-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 bg-gradient-to-br from-gold-500 to-yellow-700 rounded-full flex items-center justify-center text-black shadow-lg shadow-yellow-500/20">
                    <i class="fas fa-quran text-2xl"></i>
                </div>
                <div>
                    <h1 class="text-xl font-black">Ù…Ù†ØµØ© <span class="text-yellow-500">Ø§Ù„ØªØ§Ø¨Ø¹ÙŠÙ†</span></h1>
                    <p class="text-[10px] uppercase tracking-widest text-gray-400">Ù…Ø±ÙƒØ² Ø§Ù„ØªØ§Ø¨Ø¹ÙŠÙ† Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ</p>
                </div>
            </div>
            <div class="hidden md:flex gap-10">
                <a href="#" onclick="showSection('home')" class="nav-link">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                <a href="#" onclick="showSection('student')" class="nav-link">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨</a>
                <a href="#" onclick="showSection('donation')" class="nav-link">Ø§Ù„ØªØ¨Ø±Ø¹Ø§Øª</a>
                <a href="#" onclick="showSection('admin')" class="nav-link">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
            </div>
            <button onclick="showSection('admin')" class="btn-gold text-xs">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†</button>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-6">
        
        <div id="home" class="section-panel active">
            <div class="grid lg:grid-cols-2 gap-12 items-center min-h-[70vh]">
                <div class="space-y-8">
                    <h2 class="text-6xl md:text-8xl font-amiri font-bold leading-tight">ÙˆØ­ÙŠÙŒ ÙŠØ­ÙŠÙŠ <br><span class="text-yellow-500 italic">Ø§Ù„Ù‚Ù„ÙˆØ¨</span></h2>
                    <p class="text-gray-400 text-xl leading-relaxed border-r-4 border-yellow-600 pr-6">Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…Ø³Ø¬Ø¯ Ø§Ù„ØªØ§Ø¨Ø¹ÙŠÙ† ÙˆÙ…ØªØ§Ø¨Ø¹Ø© Ø­Ù„Ù‚Ø§Øª Ø§Ù„ØªØ­ÙÙŠØ¸ Ù„Ø¬ÙŠÙ„ Ø§Ù„Ù†ØµØ± Ø§Ù„Ù‚Ø§Ø¯Ù….</p>
                    <div class="flex gap-4">
                        <button onclick="showSection('student')" class="btn-gold">Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ø§Ù„Ø¨</button>
                        <button onclick="showSection('donation')" class="px-8 py-3 border border-yellow-600 rounded-xl hover:bg-yellow-600/10 transition">Ø¯Ø¹Ù… Ø§Ù„Ù…Ø±Ø§ÙƒØ²</button>
                    </div>
                </div>
                <div class="relative">
                    <div class="absolute -inset-10 bg-yellow-600/10 blur-[100px] rounded-full"></div>
                    <img src="https://images.unsplash.com/photo-1584281722573-f9389278280f?q=80&w=1000" class="rounded-[40px] shadow-2xl border border-yellow-600/20 relative z-10 opacity-80">
                </div>
            </div>
        </div>

        <div id="student" class="section-panel">
            <div class="max-w-4xl mx-auto">
                <div class="imperial-card p-12 text-center" id="search-container">
                    <h3 class="text-3xl font-black mb-6 font-amiri text-yellow-500">Ø³Ø¬Ù„ Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø±Ù‚Ù…ÙŠ</h3>
                    <div class="flex flex-col md:flex-row gap-4">
                        <input type="text" id="studentID" class="custom-input text-center text-2xl" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù€ ID">
                        <button onclick="fetchStudent()" class="btn-gold whitespace-nowrap">Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¬Ù„</button>
                    </div>
                </div>

                <div id="student-result" class="hidden space-y-6 mt-10">
                    <div class="imperial-card p-8 flex flex-col md:flex-row justify-between items-center gap-6 border-r-8 border-yellow-600">
                        <div>
                            <h4 id="s-name" class="text-4xl font-black">---</h4>
                            <p id="s-details" class="text-yellow-500 font-bold mt-2"></p>
                        </div>
                        <div class="text-center">
                            <span class="text-xs uppercase text-gray-400">Ø§Ù„Ù…Ø±ØªØ¨Ø©</span>
                            <div id="s-rank" class="text-3xl font-black text-yellow-500 italic">...</div>
                        </div>
                    </div>

                    <div class="imperial-card p-8">
                        <h5 class="font-bold mb-6 flex items-center gap-3">
                            <i class="fas fa-chess-king text-yellow-500"></i> Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© (30 Ø¬Ø²Ø¡)
                        </h5>
                        <div id="journey-grid" class="journey-grid"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="admin" class="section-panel">
            <div class="max-w-4xl mx-auto imperial-card p-10">
                <h3 class="text-3xl font-black mb-8 border-b border-yellow-600 pb-4">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ©</h3>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <label class="text-xs text-gray-500 uppercase">Ù‡ÙˆÙŠØ© Ø§Ù„Ø·Ø§Ù„Ø¨</label>
                        <input type="text" id="up-id" class="custom-input" placeholder="Ù…Ø«Ù„Ø§Ù‹: 101">
                        
                        <label class="text-xs text-gray-500 uppercase">Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ù…Ù†Ø¬Ø²Ø©</label>
                        <input type="number" id="up-parts" class="custom-input" placeholder="0 - 30">
                        
                        <label class="text-xs text-gray-500 uppercase">Ø§Ù„ØªÙ‚Ø¯ÙŠØ±</label>
                        <select id="up-grade" class="custom-input">
                            <option>Ù…Ù…ØªØ§Ø² ğŸŒŸ</option>
                            <option>Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹ ğŸ‘</option>
                        </select>
                    </div>
                    <div class="space-y-4">
                        <label class="text-xs text-gray-500 uppercase">Ø±Ø³Ø§Ù„Ø© Ø§Ù„ÙŠÙˆÙ…</label>
                        <textarea id="up-msg" class="custom-input h-[190px]" placeholder="Ø§ÙƒØªØ¨ ØªØ´Ø¬ÙŠØ¹Ø§Ù‹ Ù„Ù„Ø·Ø§Ù„Ø¨..."></textarea>
                    </div>
                </div>
                <button onclick="updateData()" id="saveBtn" class="btn-gold w-full mt-8">ØªØ­Ø¯ÙŠØ« ÙˆÙ…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
            </div>
        </div>

        <div id="donation" class="section-panel">
            <div class="text-center mb-12">
                <h2 class="text-5xl font-amiri font-bold mb-4 text-yellow-500">Ø§Ù„ØµØ¯Ù‚Ø© Ø§Ù„Ø¬Ø§Ø±ÙŠØ©</h2>
                <p class="text-gray-400">Ø³Ø§Ù‡Ù… ÙÙŠ ÙƒÙØ§Ù„Ø© Ø­Ù„Ù‚Ø§Øª Ù…Ø³Ø¬Ø¯ Ø§Ù„ØªØ§Ø¨Ø¹ÙŠÙ† ÙˆÙƒÙ† Ø´Ø±ÙŠÙƒØ§Ù‹ ÙÙŠ Ø§Ù„Ø£Ø¬Ø±.</p>
            </div>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="imperial-card p-8 text-center border-b-4 border-yellow-600">
                    <h4 class="text-xl font-black mb-4">ÙƒÙØ§Ù„Ø© Ø·Ø§Ù„Ø¨</h4>
                    <p class="text-3xl font-bold text-yellow-500 mb-6">50 â‚ª <small class="text-sm">/ Ø´Ù‡Ø±ÙŠØ§Ù‹</small></p>
                    <button class="btn-gold w-full">Ø§Ø®ØªØ± Ù‡Ø°Ø§ Ø§Ù„Ø³Ù‡Ù…</button>
                </div>
                <div class="imperial-card p-8 text-center border-b-4 border-yellow-600">
                    <h4 class="text-xl font-black mb-4">ÙƒÙØ§Ù„Ø© Ø­Ù„Ù‚Ø©</h4>
                    <p class="text-3xl font-bold text-yellow-500 mb-6">500 â‚ª <small class="text-sm">/ Ø´Ù‡Ø±ÙŠØ§Ù‹</small></p>
                    <button class="btn-gold w-full">Ø§Ø®ØªØ± Ù‡Ø°Ø§ Ø§Ù„Ø³Ù‡Ù…</button>
                </div>
                <div class="imperial-card p-8 text-center border-b-4 border-yellow-600">
                    <h4 class="text-xl font-black mb-4">ØµÙŠØ§Ù†Ø© Ø§Ù„Ù…Ø³Ø¬Ø¯</h4>
                    <p class="text-3xl font-bold text-yellow-500 mb-6">Ù…Ø¨Ù„Øº Ù…ÙØªÙˆØ­</p>
                    <button class="btn-gold w-full">ØªØ¨Ø±Ø¹ Ø§Ù„Ø¢Ù†</button>
                </div>
            </div>
        </div>

    </main>

    <footer class="mt-20">
        <p class="text-gray-500 text-sm">Â© 2026 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù…Ø±ÙƒØ² Ø§Ù„ØªØ§Ø¨Ø¹ÙŠÙ† Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ - Ø§Ù„Ù†ØµÙŠØ±Ø§Øª</p>
        <div class="flex justify-center gap-6 mt-4">
            <i class="fab fa-facebook hover:text-yellow-500 cursor-pointer"></i>
            <i class="fab fa-whatsapp hover:text-yellow-500 cursor-pointer"></i>
        </div>
    </footer>

    <script>
        // Ø±Ø§Ø¨Ø· Ø¬ÙˆØ¬Ù„ Ø´ÙŠØª (ÙŠØ¬Ø¨ ØªØºÙŠÙŠØ±Ù‡ Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø´Ø±)
        const scriptURL = 'https://script.google.com/macros/s/AKfycby9TJ1YcsrhZm5O3TWP41B49KP2rR-2BBP2g8lzULTQvgTacOEIPk-1_GGTliBKUxNrOw/exec';

        function showSection(id) {
            document.querySelectorAll('.section-panel').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            window.scrollTo(0,0);
        }

        async function fetchStudent() {
            const id = document.getElementById('studentID').value;
            if(!id) return Swal.fire('ØªÙ†Ø¨ÙŠÙ‡', 'Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠ', 'info');

            Swal.fire({title: 'Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...', didOpen: () => Swal.showLoading()});

            try {
                const response = await fetch(`${scriptURL}?action=getStudent&id=${id}`);
                const data = await response.json();
                Swal.close();

                if(data.found) {
                    document.getElementById('student-result').classList.remove('hidden');
                    document.getElementById('s-name').innerText = data.name;
                    document.getElementById('s-details').innerText = `Ø­Ù„Ù‚Ø©: ${data.teacher} - ${data.mosque}`;
                    document.getElementById('s-rank').innerText = data.grade || 'Ø·Ø§Ù„Ø¨ Ù…Ø¬ØªÙ‡Ø¯';
                    
                    const grid = document.getElementById('journey-grid');
                    grid.innerHTML = '';
                    for(let i=1; i<=30; i++) {
                        const dot = document.createElement('div');
                        dot.className = `part-dot ${i <= data.parts ? 'completed' : ''}`;
                        dot.innerText = i;
                        grid.appendChild(dot);
                    }
                } else {
                    Swal.fire('Ø®Ø·Ø£', 'Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„Ø³Ø¬Ù„Ø§Øª', 'error');
                }
            } catch(e) {
                Swal.fire('Ø¹Ø°Ø±Ø§Ù‹', 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…', 'error');
            }
        }

        async function updateData() {
            const btn = document.getElementById('saveBtn');
            const data = {
                action: 'updateScore',
                id: document.getElementById('up-id').value,
                parts: document.getElementById('up-parts').value,
                grade: document.getElementById('up-grade').value,
                msg: document.getElementById('up-msg').value
            };

            btn.disabled = true; btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...";

            try {
                await fetch(scriptURL, { method: 'POST', body: JSON.stringify(data) });
                Swal.fire('ØªÙ… Ø¨Ù†Ø¬Ø§Ø­', 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø³Ø¬Ù„ Ø§Ù„Ø·Ø§Ù„Ø¨ ÙˆÙ…Ø²Ø§Ù…Ù†ØªÙ‡', 'success');
            } catch(e) {
                Swal.fire('Ø®Ø·Ø£', 'ÙØ´Ù„Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©', 'error');
            }
            btn.disabled = false; btn.innerText = "ØªØ­Ø¯ÙŠØ« ÙˆÙ…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª";
        }
    </script>
</body>
</html>
