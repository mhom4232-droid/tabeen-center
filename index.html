<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø±ÙƒØ² Ø§Ù„ØªØ§Ø¨Ø¹ÙŠÙ† | Ø§Ù„ØµØ±Ø­ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠ</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <style>
        :root { 
            --gold: #D4AF37; 
            --royal: #001a33; 
            --deep-bg: #000c18;
        }
        
        body { 
            font-family: 'Tajawal', sans-serif; 
            background-color: var(--deep-bg);
            color: white;
            overflow-x: hidden;
        }

        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠ - Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© */
        .imperial-bg {
            background: radial-gradient(circle at top right, #001f3f, #000000);
            min-height: 100vh;
        }

        .font-amiri { font-family: 'Amiri', serif; }

        /* Ø§Ù„ÙƒØ±ÙˆØª Ø§Ù„ÙØ®Ù…Ø© */
        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 30px;
            transition: 0.5s;
        }
        .glass-card:hover {
            border-color: var(--gold);
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
        }

        /* Ù†Ø¸Ø§Ù… Ø§Ù„Ø±Ø­Ù„Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© (The Journey) */
        .journey-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(45px, 1fr));
            gap: 12px;
        }
        .step-dot {
            aspect-ratio: 1;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 900;
            border: 1px solid rgba(212, 175, 55, 0.3);
            transition: 0.4s;
        }
        .step-active {
            background: linear-gradient(135deg, var(--gold), #8a6d1a);
            color: var(--royal);
            box-shadow: 0 0 15px var(--gold);
            border: none;
        }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø°Ù‡Ø¨ÙŠØ© */
        .btn-imperial {
            background: linear-gradient(135deg, #D4AF37 0%, #AA8928 100%);
            color: #000;
            font-weight: 900;
            padding: 12px 30px;
            border-radius: 15px;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .btn-imperial:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.4);
        }

        /* Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª */
        .imperial-input {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(212,175,55,0.2);
            border-radius: 15px;
            padding: 15px;
            color: white;
            outline: none;
            width: 100%;
        }
        .imperial-input:focus { border-color: var(--gold); background: rgba(255,255,255,0.1); }

        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
        .page { display: none; animation: fadeIn 0.8s ease-out; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø°Ù‡Ø¨ÙŠ */
        .marquee-gold {
            background: rgba(212, 175, 55, 0.1);
            border-y: 1px solid var(--gold);
            padding: 10px 0;
            color: var(--gold);
            font-weight: bold;
        }
    </style>
</head>
<body class="imperial-bg">

    <div class="marquee-gold overflow-hidden whitespace-nowrap border-b border-yellow-600/30">
        <div class="inline-block animate-marquee">
            <span class="mx-10">âœ¨ "Ø®ÙŠØ±ÙƒÙ… Ù…Ù† ØªØ¹Ù„Ù… Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆØ¹Ù„Ù…Ù‡" âœ¨</span>
            <span class="mx-10">ğŸ•Œ Ù…Ø±ÙƒØ² Ø§Ù„ØªØ§Ø¨Ø¹ÙŠÙ† - Ø§Ù„Ù†ØµÙŠØ±Ø§Øª - Ø¨Ø¥Ø´Ø±Ø§Ù Ø£. Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ Ù†ÙˆÙÙ„</span>
            <span class="mx-10">ğŸ“ˆ ØªÙ… Ø¥Ù†Ø¬Ø§Ø² 65% Ù…Ù† Ø§Ù„Ù…Ù†Ø¸ÙˆÙ…Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­</span>
        </div>
    </div>

    <nav class="p-6 flex justify-between items-center max-w-7xl mx-auto">
        <div class="flex items-center gap-4">
            <div class="w-12 h-12 bg-gradient-to-br from-yellow-600 to-yellow-300 rounded-full flex items-center justify-center text-black text-2xl shadow-lg shadow-yellow-600/20">
                <i class="fas fa-quran"></i>
            </div>
            <div>
                <h1 class="text-2xl font-black tracking-tighter text-white">Ù…Ø±ÙƒØ² <span class="text-yellow-500">Ø§Ù„ØªØ§Ø¨Ø¹ÙŠÙ†</span></h1>
                <p class="text-[9px] uppercase tracking-[0.3em] text-gray-400">Imperial Quranic Center</p>
            </div>
        </div>
        <div class="hidden md:flex gap-8 text-xs font-bold uppercase">
            <a href="#" onclick="showPage('home')" class="hover:text-yellow-500 transition">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a href="#" onclick="showPage('student')" class="hover:text-yellow-500 transition">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨</a>
            <a href="#" onclick="showPage('donate')" class="hover:text-yellow-500 transition text-yellow-500">Ø§Ù„ÙˆÙ‚Ù Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ</a>
        </div>
        <button onclick="showPage('login')" class="btn-imperial text-[10px]">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†</button>
    </nav>

    <main class="max-w-7xl mx-auto px-6 py-12">
        
        <section id="home" class="page active">
            <div class="grid lg:grid-cols-2 gap-12 items-center min-h-[70vh]">
                <div class="space-y-8">
                    <h2 class="text-6xl md:text-8xl font-black font-amiri leading-tight">ØµÙ†Ø§Ø¹Ø© <br><span class="text-yellow-500">Ø§Ù„Ø£Ø¬ÙŠØ§Ù„</span> Ø¨Ø§Ù„Ù†ÙˆØ±</h2>
                    <p class="text-gray-400 text-xl max-w-md leading-relaxed italic border-r-4 border-yellow-600 pr-4">Ù…Ù† Ù‚Ù„Ø¨ Ø§Ù„Ù†ØµÙŠØ±Ø§ØªØŒ Ù†Ø®Ø±Ø¬ Ø­ÙÙØ§Ø¸Ø§Ù‹ ÙŠØ­Ù…Ù„ÙˆÙ† ÙƒØªØ§Ø¨ Ø§Ù„Ù„Ù‡ ÙÙŠ ØµØ¯ÙˆØ±Ù‡Ù…ØŒ Ù„ÙŠÙƒÙˆÙ†ÙˆØ§ Ù…Ø´Ø§Ø¹Ù„ Ù‡Ø¯Ø§ÙŠØ©.</p>
                    <div class="flex gap-4">
                        <button onclick="showPage('student')" class="btn-imperial">Ù…Ù„Ù Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</button>
                        <button onclick="showPage('donate')" class="px-8 py-3 border border-yellow-600 rounded-xl font-bold hover:bg-yellow-600/10 transition">Ø§Ø¯Ø¹Ù… Ø­Ù„Ù‚Ø§ØªÙ†Ø§</button>
                    </div>
                </div>
                <div class="relative">
                    <div class="absolute -inset-20 bg-yellow-600/10 blur-[100px] rounded-full"></div>
                    <img src="https://images.unsplash.com/photo-1590076175574-e8893110534b?q=80&w=1000" class="rounded-[50px] shadow-2xl border-2 border-yellow-600/20 relative z-10">
                </div>
            </div>
        </section>

        <section id="student" class="page">
            <div class="max-w-4xl mx-auto space-y-8">
                <div class="glass-card p-12 text-center" id="stdLogin">
                    <h2 class="text-3xl font-black mb-8 font-amiri italic text-yellow-500">Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ Ù†Ø­Ùˆ Ø§Ù„Ø®ØªÙ…Ø©</h2>
                    <input type="text" id="stdID" class="imperial-input text-center text-2xl mb-6" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù€ ID">
                    <button onclick="fetchStudent()" id="queryBtn" class="btn-imperial w-full">ÙØªØ­ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ</button>
                </div>

                <div id="stdProfile" class="hidden space-y-6">
                    <div class="glass-card p-8 flex flex-col md:flex-row justify-between items-center gap-6">
                        <div class="flex items-center gap-6">
                            <div class="w-20 h-20 bg-yellow-500 rounded-2xl flex items-center justify-center text-black text-4xl font-black">Ø£</div>
                            <div>
                                <h3 id="stdName" class="text-3xl font-black">...</h3>
                                <p id="stdInfo" class="text-yellow-500 font-bold italic"></p>
                            </div>
                        </div>
                        <div class="text-center">
                            <p class="text-xs text-gray-400 uppercase">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­Ø§Ù„ÙŠ</p>
                            <p id="stdLevel" class="text-2xl font-black text-yellow-500">...</p>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="md:col-span-2 glass-card p-8">
                            <h4 class="mb-6 font-bold flex items-center gap-2"><i class="fas fa-map-marked-alt text-yellow-500"></i> Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù€ 30 Ø¬Ø²Ø¡</h4>
                            <div id="journeyMap" class="journey-grid"></div>
                        </div>
                        <div class="glass-card p-8 bg-yellow-600/5">
                            <h4 class="mb-4 font-bold text-yellow-500">Ø±Ø³Ø§Ù„Ø© Ø§Ù„ÙŠÙˆÙ…:</h4>
                            <p id="stdMsg" class="italic text-gray-300 leading-relaxed text-sm">...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="teacher" class="page">
            <div class="glass-card p-10 max-w-4xl mx-auto">
                <h2 class="text-3xl font-black mb-10 font-amiri italic border-b border-yellow-600/30 pb-4">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø±Ù‚Ù…ÙŠ</h2>
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <input type="text" id="tID" class="imperial-input" placeholder="ID Ø§Ù„Ø·Ø§Ù„Ø¨">
                    <input type="number" id="tParts" class="imperial-input" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡">
                    <select id="tGrade" class="imperial-input">
                        <option>Ù…Ù…ØªØ§Ø² ğŸŒŸ</option>
                        <option>Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹ ğŸ‘</option>
                    </select>
                    <input type="text" id="tToday" class="imperial-input" placeholder="ØªØ³Ù…ÙŠØ¹ Ø§Ù„ÙŠÙˆÙ…">
                </div>
                <textarea id="tMsg" class="imperial-input h-32 mb-6" placeholder="Ø±Ø³Ø§Ù„Ø© ØªØ´Ø¬ÙŠØ¹ÙŠØ©..."></textarea>
                <button onclick="updateData()" id="upBtn" class="btn-imperial w-full">ØªØ£Ù…ÙŠÙ† ÙˆØ­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
            </div>
        </section>

        <section id="login" class="page">
            <div class="glass-card p-12 max-w-md mx-auto text-center border-t-4 border-yellow-600">
                <h2 class="text-3xl font-black mb-8">Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¢Ù…Ù†</h2>
                <input type="password" id="pass" class="imperial-input text-center mb-6" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                <button onclick="login()" class="btn-imperial w-full">Ø¯Ø®ÙˆÙ„</button>
            </div>
        </section>

    </main>

    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycby9TJ1YcsrhZm5O3TWP41B49KP2rR-2BBP2g8lzULTQvgTacOEIPk-1_GGTliBKUxNrOw/exec';

        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            window.scrollTo(0,0);
        }

        function login() {
            const p = document.getElementById('pass').value;
            if(p === "Admin2026" || p === "2026") showPage('teacher');
            else Swal.fire('Ø®Ø·Ø£', 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©', 'error');
        }

        async function fetchStudent() {
            const id = document.getElementById('stdID').value;
            if(!id) return;
            
            Swal.fire({title: 'Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...', allowOutsideClick: false, didOpen: () => Swal.showLoading()});
            
            try {
                const res = await fetch(`${scriptURL}?action=getStudent&id=${id}`);
                const data = await res.json();
                Swal.close();

                if(data.found) {
                    document.getElementById('stdLogin').classList.add('hidden');
                    document.getElementById('stdProfile').classList.remove('hidden');
                    document.getElementById('stdName').innerText = data.name;
                    document.getElementById('stdInfo').innerText = `Ø­Ù„Ù‚Ø© ${data.teacher} - ${data.mosque}`;
                    document.getElementById('stdLevel').innerText = data.grade || 'Ù…Ù†ØªØ¸Ù…';
                    document.getElementById('stdMsg').innerText = data.studentMsg || 'Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø·Ø±ÙŠÙ‚ Ø§Ù„Ù†ÙˆØ± ÙŠØ§ Ø¨Ø·Ù„!';
                    
                    // Ø±Ø³Ù… Ø§Ù„Ø±Ø­Ù„Ø©
                    const map = document.getElementById('journeyMap');
                    map.innerHTML = '';
                    for(let i=1; i<=30; i++) {
                        const dot = document.createElement('div');
                        dot.className = `step-dot ${i <= data.parts ? 'step-active' : ''}`;
                        dot.innerText = i;
                        map.appendChild(dot);
                    }
                } else {
                    Swal.fire('Ø®Ø·Ø£', 'Ø§Ù„Ø±Ù‚Ù… ØºÙŠØ± Ù…Ø³Ø¬Ù„', 'error');
                }
            } catch(e) { Swal.fire('Ø®Ø·Ø£', 'ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³Ø­Ø§Ø¨Ø©', 'error'); }
        }

        async function updateData() {
            const btn = document.getElementById('upBtn');
            const data = {
                action: 'updateScore',
                id: document.getElementById('tID').value,
                parts: document.getElementById('tParts').value,
                grade: document.getElementById('tGrade').value,
                today: document.getElementById('tToday').value,
                msg: document.getElementById('tMsg').value
            };
            
            btn.innerText = "... Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸"; btn.disabled = true;
            try {
                await fetch(scriptURL, { method: 'POST', body: JSON.stringify(data) });
                Swal.fire('ØªÙ…', 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } catch(e) { Swal.fire('Ø®Ø·Ø£', 'Ø­Ø¯Ø« Ø®Ø·Ø£', 'error'); }
            btn.innerText = "ØªØ£Ù…ÙŠÙ† ÙˆØ­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"; btn.disabled = false;
        }
    </script>
</body>
</html>
