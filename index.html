<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø§Ù„ØªØ§Ø¨Ø¹ÙŠÙ† | Ø§Ù„ØµØ±Ø­ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠ Ø§Ù„Ø±Ù‚Ù…ÙŠ</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <style>
        :root { 
            --gold: #D4AF37; 
            --gold-light: #f1d592;
            --royal-blue: #001a33; 
            --deep-black: #000c18;
        }
        
        body { 
            font-family: 'Tajawal', sans-serif; 
            background: radial-gradient(circle at center, var(--royal-blue) 0%, var(--deep-black) 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .font-amiri { font-family: 'Amiri', serif; }

        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø²Ø¬Ø§Ø¬ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© */
        .glass-card {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(212, 175, 55, 0.15);
            border-radius: 30px;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .glass-card:hover {
            border-color: var(--gold);
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.1);
            transform: translateY(-5px);
        }

        /* Ù†Ø¸Ø§Ù… Ø§Ù„Ø±Ø­Ù„Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© */
        .journey-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            gap: 10px;
        }
        .part-node {
            aspect-ratio: 1;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 900;
            border: 1px solid rgba(212, 175, 55, 0.2);
            background: rgba(0,0,0,0.3);
            transition: 0.4s;
        }
        .part-node.completed {
            background: linear-gradient(135deg, var(--gold), #8a6d1a);
            color: var(--deep-black);
            border: none;
            box-shadow: 0 0 15px var(--gold);
        }

        /* Ø£Ø²Ø±Ø§Ø± UX */
        .btn-imperial {
            background: linear-gradient(135deg, var(--gold) 0%, #AA8928 100%);
            color: #000;
            font-weight: 800;
            padding: 14px 35px;
            border-radius: 15px;
            transition: 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        .btn-imperial:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0,0,0,0.4);
        }

        .input-imperial {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 15px;
            padding: 15px;
            color: white;
            width: 100%;
            transition: 0.3s;
        }
        .input-imperial:focus {
            border-color: var(--gold);
            background: rgba(255,255,255,0.07);
            outline: none;
        }

        /* Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª */
        .page { display: none; opacity: 0; transform: translateY(20px); transition: 0.5s; }
        .page.active { display: block; opacity: 1; transform: translateY(0); }

        /* Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† */
        @keyframes goldPulse {
            0% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(212, 175, 55, 0); }
            100% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0); }
        }
        .pulse { animation: goldPulse 2s infinite; }
    </style>
</head>
<body>

    <header class="p-6 sticky top-0 z-50 backdrop-blur-lg border-b border-white/5">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-4 cursor-pointer" onclick="showPage('home')">
                <div class="w-12 h-12 bg-gradient-to-br from-gold to-yellow-600 rounded-2xl flex items-center justify-center text-black shadow-lg">
                    <i class="fas fa-quran text-2xl"></i>
                </div>
                <div>
                    <h1 class="text-xl font-black tracking-tighter">Ù…Ù†ØµØ© <span class="text-gold">Ø§Ù„ØªØ§Ø¨Ø¹ÙŠÙ†</span></h1>
                    <p class="text-[9px] text-gray-400 uppercase tracking-widest italic">The Followers Center</p>
                </div>
            </div>
            
            <nav class="hidden md:flex gap-8 font-bold text-sm">
                <a href="javascript:void(0)" onclick="showPage('home')" class="hover:text-gold transition">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                <a href="javascript:void(0)" onclick="showPage('student-portal')" class="hover:text-gold transition">Ù…Ù„Ù Ø§Ù„Ø·Ø§Ù„Ø¨</a>
                <a href="javascript:void(0)" onclick="showPage('donations')" class="text-gold border-b border-gold px-1">Ø§Ù„ÙˆÙ‚Ù Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ</a>
            </nav>

            <button onclick="showPage('login')" class="text-xs bg-white/5 px-5 py-2.5 rounded-xl border border-white/10 hover:border-gold transition">
                <i class="fas fa-user-shield ml-2"></i> Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„Ù…
            </button>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-6 py-12">
        
        <section id="home" class="page active">
            <div class="flex flex-col items-center text-center space-y-8 mt-10">
                <span class="px-4 py-1 bg-gold/10 text-gold rounded-full text-xs font-bold border border-gold/20">Ù‚Ø±ÙŠØ¨Ø§Ù‹: Ø§ÙØªØªØ§Ø­ ÙØ±Ø¹ Ù…Ø³Ø¬Ø¯ Ø°Ùˆ Ø§Ù„Ù†ÙˆØ±ÙŠÙ†</span>
                <h2 class="text-6xl md:text-8xl font-amiri font-bold leading-tight">ÙˆÙØ±ÙØªÙÙ‘Ù„Ù Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†Ù <br><span class="text-gold italic">ØªÙØ±Ù’ØªÙÙŠÙ„Ù‹Ø§</span></h2>
                <p class="text-gray-400 text-lg max-w-2xl leading-relaxed">Ø£ÙˆÙ„ Ù…Ù†ØµØ© Ø±Ù‚Ù…ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø­Ù„Ù‚Ø§Øª Ø§Ù„ØªØ­ÙÙŠØ¸ Ø¨Ù…Ø³Ø¬Ø¯ Ø§Ù„ØªØ§Ø¨Ø¹ÙŠÙ†ØŒ Ù†Ø¬Ù…Ø¹ Ø¨ÙŠÙ† Ø£ØµØ§Ù„Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ… ÙˆØ­Ø¯Ø§Ø«Ø© Ø§Ù„ØªÙ‚Ù†ÙŠØ©.</p>
                <div class="flex gap-4">
                    <button onclick="showPage('student-portal')" class="btn-imperial pulse">Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ø§Ù„Ø¢Ù†</button>
                    <button onclick="showPage('donations')" class="px-8 py-4 rounded-15 font-bold border border-white/20 hover:bg-white/5 transition">Ø³Ø§Ù‡Ù… ÙÙŠ Ø§Ù„ÙˆÙ‚Ù</button>
                </div>
            </div>
        </section>

        <section id="student-portal" class="page">
            <div class="max-w-3xl mx-auto">
                <div class="glass-card p-10 text-center" id="searchBox">
                    <h3 class="text-3xl font-black mb-6 font-amiri text-gold">Ø§Ø³ØªØ¹Ù„Ù… Ø¹Ù† Ù…Ø­ÙÙˆØ¸Ùƒ</h3>
                    <div class="flex gap-3">
                        <input type="text" id="studentID" class="input-imperial text-center text-2xl" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù€ ID">
                        <button onclick="fetchStudentData()" class="btn-imperial py-2">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>

                <div id="studentCard" class="hidden mt-8 space-y-6">
                    <div class="glass-card p-8 flex justify-between items-center border-r-4 border-r-gold">
                        <div>
                            <h2 id="sName" class="text-4xl font-black">---</h2>
                            <p id="sTeacher" class="text-gold font-bold mt-1"></p>
                        </div>
                        <div class="text-center">
                            <span class="block text-xs text-gray-400 uppercase italic">Ø§Ù„ØªÙ‚Ø¯ÙŠØ±</span>
                            <span id="sGrade" class="text-3xl font-black text-gold">---</span>
                        </div>
                    </div>

                    <div class="glass-card p-8">
                        <h4 class="mb-6 font-bold flex items-center gap-3 italic text-gray-300 underline decoration-gold">
                            <i class="fas fa-star text-gold"></i> Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² (30 Ø¬Ø²Ø¡)
                        </h4>
                        <div id="journeyGrid" class="journey-grid"></div>
                    </div>

                    <div class="glass-card p-8 bg-gold/5 border-dashed">
                        <h4 class="text-gold font-bold mb-2">Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø­ÙØ¸ Ù„Ùƒ:</h4>
                        <p id="sMsg" class="italic text-gray-300">Ø£Ø¨Ø´Ø± ÙŠØ§ Ø¨Ù†ÙŠØŒ ÙØ¨ÙƒÙ„ Ø­Ø±Ù Ø­Ø³Ù†Ø©..</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="teacher-panel" class="page">
            <div class="glass-card p-10 max-w-4xl mx-auto border-t-4 border-gold">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-black">ØªØ­Ø¯ÙŠØ« Ø³Ø¬Ù„ Ø§Ù„Ø­Ù„Ù‚Ø©</h2>
                    <span class="text-xs bg-white/5 px-3 py-1 rounded text-gray-400">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…Ø­ÙØ¸ÙŠÙ†</span>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                    <input type="text" id="upId" class="input-imperial" placeholder="ID Ø§Ù„Ø·Ø§Ù„Ø¨">
                    <input type="number" id="upParts" class="input-imperial" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ù…Ù†Ø¬Ø²Ø©">
                    <select id="upGrade" class="input-imperial">
                        <option>Ø§Ù…ØªÙŠØ§Ø² ğŸŒŸ</option>
                        <option>Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹ ğŸ‘</option>
                        <option>Ø¬ÙŠØ¯ âœ¨</option>
                    </select>
                    <input type="text" id="upToday" class="input-imperial" placeholder="Ø¢Ø®Ø± Ø³ÙˆØ±Ø© ØªÙ… ØªØ³Ù…ÙŠØ¹Ù‡Ø§">
                </div>
                <textarea id="upMsg" class="input-imperial mt-6 h-32" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© ØªØ­ÙÙŠØ²ÙŠØ© Ù„Ù„Ø·Ø§Ù„Ø¨..."></textarea>
                <button onclick="updateSheet()" id="saveBtn" class="btn-imperial w-full mt-8 justify-center">Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙˆÙ…Ø²Ø§Ù…Ù†ØªÙ‡Ø§</button>
            </div>
        </section>

        <section id="login" class="page">
            <div class="glass-card p-12 max-w-md mx-auto text-center">
                <h2 class="text-2xl font-black mb-8">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø­ÙØ¸ÙŠÙ†</h2>
                <input type="password" id="adminPass" class="input-imperial text-center mb-6" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                <button onclick="auth()" class="btn-imperial w-full justify-center">Ø¯Ø®ÙˆÙ„ Ø¢Ù…Ù†</button>
            </div>
        </section>

    </main>

    <script>
        // Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø§Øµ Ø¨Ø¬ÙˆØ¬Ù„ Ø´ÙŠØª (Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡ Ø¨Ø±Ø§Ø¨Ø·Ùƒ)
        const scriptURL = 'YOUR_GOOGLE_SCRIPT_URL';

        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            const target = document.getElementById(id);
            target.style.display = 'block';
            setTimeout(() => target.classList.add('active'), 50);
            window.scrollTo(0,0);
        }

        async function fetchStudentData() {
            const id = document.getElementById('studentID').value;
            if(!id) return;

            Swal.fire({ title: 'Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø³Ø¬Ù„Ø§ØªÙƒ...', allowOutsideClick: false, didOpen: () => Swal.showLoading() });

            try {
                const response = await fetch(`${scriptURL}?action=getStudent&id=${id}`);
                const data = await response.json();
                Swal.close();

                if(data.found) {
                    document.getElementById('studentCard').classList.remove('hidden');
                    document.getElementById('sName').innerText = data.name;
                    document.getElementById('sTeacher').innerText = `Ø¨Ø¥Ø´Ø±Ø§Ù Ø§Ù„Ù…Ø­ÙØ¸: ${data.teacher}`;
                    document.getElementById('sGrade').innerText = data.grade || '---';
                    document.getElementById('sMsg').innerText = data.studentMsg || 'Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù„Ù‡ ÙˆØ±Ø¹Ø§ÙŠØªÙ‡.';
                    
                    const grid = document.getElementById('journeyGrid');
                    grid.innerHTML = '';
                    for(let i=1; i<=30; i++) {
                        const node = document.createElement('div');
                        node.className = `part-node ${i <= data.parts ? 'completed' : ''}`;
                        node.innerText = i;
                        grid.appendChild(node);
                    }
                } else {
                    Swal.fire('Ø¹Ø°Ø±Ø§Ù‹', 'Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ ØºÙŠØ± Ù…Ø³Ø¬Ù„', 'error');
                }
            } catch(e) {
                Swal.fire('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„', 'ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø±Ø¨Ø· Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'warning');
            }
        }

        async function updateSheet() {
            const btn = document.getElementById('saveBtn');
            const payload = {
                action: 'updateScore',
                id: document.getElementById('upId').value,
                parts: document.getElementById('upParts').value,
                grade: document.getElementById('upGrade').value,
                today: document.getElementById('upToday').value,
                msg: document.getElementById('upMsg').value
            };

            btn.disabled = true; btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...";

            try {
                await fetch(scriptURL, { method: 'POST', body: JSON.stringify(payload) });
                Swal.fire('Ù†Ø¬Ø­ Ø§Ù„Ø£Ù…Ø±', 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } catch(e) {
                Swal.fire('Ø®Ø·Ø£', 'ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
            }
            btn.disabled = false; btn.innerText = "Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙˆÙ…Ø²Ø§Ù…Ù†ØªÙ‡Ø§";
        }

        function auth() {
            const pass = document.getElementById('adminPass').value;
            if(pass === "2026") showPage('teacher-panel');
            else Swal.fire('Ø®Ø·Ø£', 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©', 'error');
        }
    </script>
</body>
</html>
